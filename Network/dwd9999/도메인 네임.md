# 도메인 네임
네트워크 상에서 어떤 호스트를 특정하기 위해서는 원래 [IP 주소](IP%20주소.md)를 사용함  
하지만 너무 **외우기 어렵고**, IP 주소는 **언제든 바뀔 수 있기** 때문에 다른 방법이 필요했음

이를 위해 나온 개념이 **도메인 네임(Domain Name)**  
IP 주소와 대응되는 **문자열 형태**의 호스트 특정 정보  
ex) google.com, naver.com
![](img/NameServer.png)  
이 도메인 네임으로 호스트를 특정하기 위해서는 그 **도메인 네임에 매칭되는 IP 주소**를 알 수 있어야 함  
공용 전화번호부와 같이 도메인 네임:IP 주소 쌍을 관리하는 곳이 **네임 서버(Name Server)**  
여기서 도메인 네임을 관리하는 네임 서버를 **DNS 서버** 라고 부름

> **💡 공용 전화번호부가 네임 서버면 개인 전화번호부도 있나요?**
>
> 호스트마다 유지하는 개인 전화번호부와 같은 **hosts 파일**이 있음  
> 도메인 네임과 IP 주소의 대응 관계를 담고있어, 이를 토대로 도메인 네임에 대응하는 IP 주소를 식별 할 수 있음  
> 단, 이 파일 하나로 네트워크에 있는 **수많은 호스트를 식별하기 어렵기에** 네임 서버가 필요한 것!

## 구조
`www.example.com` 이라는 도메인 네임이 있다고 가정하자  
도메인 네임은 **점(.)을 기준으로 계층적으로 분류**됨  
최상단에 **루트 도메인**, 그 다음 단계인 **최상위 도메인** 식으로 내려감  
![](img/Domain.png)

1. **최상위 도메인(TLD, Top-Level Domain)**  
   일반적으로 알고 있는 도메인 네임의 마지막 부분  
   `www.example.com`에서 `com` 부분
2. **루트 도메인(Root Domain)**  
   점(.)으로 표현되며 도메인 네임 마지막에 점이 찍힌 형태로 표현됨  
   실제로 `www.google.com.`이라는 주소로 접속해도 잘 됨  
   하지만 일반적으로 생략해서 표기함
3. **2단계 도메인(Second-Level Domain)**  
   최상위 도메인의 도메인  
   `www.example.com`에서 `example` 부분  
   이후 계층에 따라 단계가 증가함 (3단계, 4단계, ..)  
   주로 3~5단계 정도로 이루어짐
4. **전체 주소 도메인 네임(FQDN, Fully-Qualified Domain Name)**  
   도메인 네임을 모두 포함하는 것  
   `www.example.com` 전부를 말함

이렇게 각 도메인 네임을 모두 조합하면 호스트를 식별할 수 있는 도메인 네임을 얻을 수 있음  
이런 점에서 **첫 번째 부분**인 `www`를 **호스트 네임(Host Name)** 이라고도 부름

## 네임 서버
계층적인 도메인 네임을 효율적으로 관리하기 위해, 네임 서버 또한 **계층적인 형태**를 이룸  
또한, 여러 개 존재하며 여러 군데에 위치해있음  
이런 계층적이고 분산된 도메인 네임 관리 체계를 **도메인 네임 시스템(DNS, Domain Name System)** 이라 부름  
![](img/NameServer2.png)  
도메인 네임을 통해 IP 주소를 알아내는 과정을 알아보자  
도메인 네임에 대응되는 IP 주소를 알아내는 과정을 **도메인 네임을 풀이(Resolve)** 한다고 하며, **리졸빙(Resolving)** 한다고도 함

네임 서버 유형은 크게 네가지로 나뉨

1. **로컬 네임 서버(Local Name Server)**  
   클라이언트와 맞닿아 있는 네임 서버  
   클라이언트가 도메인 네임을 통해 IP 주소를 알아내고자 할 때 가장 먼저 찾음  
   일반적으로 ISP에서 할당해 주는 경우가 많음  
   ISP 에서 할당해 주는 로컬 네임 서버 주소가 아닌, **공개 DNS 서버(Public DNS Server)** 를 사용해도 됨  
   ex) 구글의 `8.8.8.8`, `8.8.4.4`
2. **루트 네임 서버(Root Name Server)**  
   로컬 네임 서버에서 찾지 못하면 다음으로 오게 되는 서버  
   ![](img/RootNameServer.png)  
   루트 도메인을 관장하는 네임 서버로, 질의에 대해 TLD 네임 서버의 IP 주소를 반환할 수 있음
3. **TLD(최상위 도메인) 네임 서버**  
   TLD를 관리하는 네임 서버  
   TLD의 하위 도메인 네임을 관리하는 네임 서버 주소를 반환할 수 있음  
   마찬가지로 하위 도메인 네임을 관리하는 네임 서버는 그보다 하위 도메인 네임을 관리하는 네임 서버를 반환할 수 있음
4. **책임 네임 서버(Authoriative Name Server)**  
   특정 도메인 영역(Zone) 을 관리하는 네임 서버  
   자신이 관리하는 도메인 영역의 질의를 곧바로 답할 수 있음  
   일반적으로 로컬 네임 서버는 책임 네임 서버에서 원하는 IP 주소를 얻어냄

여기서 리졸빙 과정을 더 자세히 알아보자  
로컬 네임 서버가 네임 서버들에게 질의하는 방법은 크게 두 가지가 있음  
![](img/Resolving.png)  
이런 상황을 가정하자

1. 재귀적 질의(Recursive Query)  
   클라이언트가 로컬 네임 서버에게 질의하면, 로컬 네임 서버가 루트 네임 서버에게 질의함  
   ![](img/RecursionQuery.png)  
   이후 각 서버가 다음 계층으로 질의하는 과정을 반복하며 최종 응답 결과를 전달함
2. 반복적 질의(Iterative Query)  
   클라이언트가 로컬 네임 서버에게 질의하면, 로컬 네임 서버가 루트 네임 서버에게 질의해 다음으로 지의할 네임 서버의 주소를 응답받음  
   ![](img/IterativeQuery.png)  
   이 과정을 반복하며 최종 응답 결과를 클라이언트에게 전달함

## URI
**송수신하고자 하는 정보를 식별**하기 위한 방식  
URI를 식별 정보 기준으로 분류한 개념인 **URL, URN**이 있음

이후 사용할 **자원(Resource)** 라는 개념은 네트워크상의 **메시지를 통해 주고받는 대상**을 의미함  
오늘날은 대부분의 통신이 HTTP 기반으로 이루어지므로, 자원을 **HTTP 요청 메시지의 대상** 이라고도 부름

네트워크 상에서 자원을 주고받기 위해서는 **자원을 식별**해야 함  
자원을 식별할 수 있는 정보가 **URI(Uniform Resource Identifier)**

자원을 식별하려면 위치를 이용해 식별할 수도 있고, 이름을 이용해 자원을 식별할 수도 있음  
**위치를 이용**해 자원을 식별하는 것이 **URL(Uniform Resource Locator)**  
**이름을 이용**해 자원을 식별하는 것이 **URN(Uniform Resource Name)**

### URL
URL과 URN 중 오늘날은 **URL을 더 많이 사용**함  
형식은 크게 다섯 부분으로 나눌 수 있음  
![](img/URL.png)

1. scheme  
   URL의 첫 부분  
   **자원에 접근하는 방법**  
   일반적으로 **사용할 프로토콜이 명시**되며, HTTP를 사용하면 http://, HTTPS를 사용하면 https://
2. authority  
   **호스트를 특정**할 수 있는 정보  
   IP 주소나 도메인 네임이 들어올 수 있음
3. path  
   **자원이 위치한 경로**  
   슬래시(/)를 기준으로 계층적으로 표현되며, 최상위 경로 또한 슬래시로 표현됨  
   ![](img/Path.png)  
   ex) 최상위 경로 아래(/), home 아래(/home), Images 아래(/home/images)
4. query  
   HTTP는 요청-응답 기반 프로토콜이므로, **요청에 더 많은 정보**가 필요한 경우가 있음  
   이럴 때 사용하는 것이 **쿼리 문자열(Query String)**  
   **물음표(?)로 시작**되여 **키=값** 형태를 가진 데이터를 **앰퍼샌드(&)를 사용해 연결**함  
   ex) ~com/search?query=value&query2=value2  
   쿼리 문자열은 개발자가 설계하기 나름
5. fragment  
   자원의 한 조각을 가리키기 위한 정보  
   흔히 HTML 파일에서 특정 부분을 가리키기 위해 사용됨  
   ex) ~com/doc#section1

### URN
URL과 다르게 자원에 고유한 이름을 붙이는 이름 기반 식별자  
**자원의 위치와 무관**하게 자원을 식별할 수 있음  
ex) ISBN이 1234인 도서 -> urn:isbn:1243
